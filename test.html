<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>å¼¹å¹•æµ‹è¯•</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
      }


      /* å¿…é¡»è¦è®¾ç½®å¼¹å¹•å®¹å™¨çš„å®½é«˜ */
      .screen {
        /* width: 100vw; */
        /* height: 100%; */
        height: 100vh;
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
        overflow: hidden;
        /* width: 100vw; */
      }

    </style>
  </head>

  <body>
    <!-- <div id="root">
      <div class="app">
        <div class="danmu-content">
          <div class="screen"></div>
        </div>
      </div>
    </div> -->
    <div class="screen"></div>
  </body>
  <script src="https://unpkg.com/js-bullets@latest/dist/BulletJs.min.js"></script>

  <script>
    const danmuList = [
      'ä½ å¥½ç§‘æ¯”å¸ƒè±æ©ç‰¹',
      'è¿™ä¸ªè€å“¥çš„è¯„è®ºè¯´çš„å¾ˆå¯¹å•Šï¼Œè¿™éƒ½èƒ½è¢«è¿è§„éšè—ï¼Ÿæ˜¯æˆ³ç—›åˆ°æŸäº›äººäº†å—ã€‚',
      'rip....',
      'resepct',
      'ğŸ˜‚â¤ï¸ğŸ˜ğŸ˜’ğŸ‘Œâ˜ºï¸â˜ºï¸ğŸ˜ŠğŸ˜­ğŸ˜©ğŸ˜©ğŸ˜”ğŸ˜ğŸ˜ğŸ‘ğŸ¿ğŸ˜ğŸ˜ğŸ˜ğŸ˜”ğŸ’•ğŸ˜­ğŸ˜˜ğŸ˜Šâ¤ï¸ğŸ˜',
      'åœ£ä½•å¡-ç©†é‡Œå°¼å¥¥',
      'æ³°ä¼¦å¢ï¼Œæ³°ä¼¦å¢ï¼Œæ³°ä¼¦å¢ï¼Œæ³°ä¼¦å¢',
      'å‹’å¸ƒæœ—-è©¹å§†æ–¯',
      'emoji',
      'æ¹–äººé˜µå®¹ä¹Ÿä¸æ˜¯ç‰¹åˆ«è±ªåä¸ºä»€ä¹ˆèƒ½æ‰“åˆ°è¥¿éƒ¨ç¬¬ä¸€ï¼Ÿ ç”±é«˜ç”°å¤§å” å‘è¡¨åœ¨ç¯®çƒÂ·æ¹¿ä¹ä¹çš„è¯é¢˜-è¯´çš„å¾ˆå¯¹å•Šï¼Œå¾ˆå¯¹å•Š',
      '----huhuh---hahahha---',
      'ğŸ˜‚â¤ï¸ğŸ˜ğŸ˜’ğŸ‘Œâ˜ºï¸â˜ºï¸ğŸ˜ŠğŸ˜­ğŸ˜©ğŸ˜©ğŸ˜”ğŸ˜ğŸ˜ğŸ‘ğŸ¿ğŸ˜ğŸ˜ğŸ˜ğŸ˜”ğŸ’•ğŸ˜­ğŸ˜˜ğŸ˜Šâ¤ï¸ğŸ˜',
    ];

    const getRandom = (min, max) =>
      parseInt(Math.random() * (max - min + 1)) + min;

    const danmuTest = {
      screen: null,
      handler: null,
      dom: {
        closeTime: document.querySelector('.close-time'),
        openTime: document.querySelector('.open-time'),
        sendDanmu: document.querySelector('#sendDanmu'),
        dInput: document.querySelector('#d-input'),
        pauseAll: document.querySelector('#pauseAll'),
        continueAll: document.querySelector('#continueAll'),
      },
      init() {
        this.eventInit();
        this.screen = new BulletJs('.screen', {
          trackHeight: 35,
          speed: undefined,
          pauseOnClick: true,
          pauseOnHover: true,
        });
        this.sendDanmu();
      },
      sendDanmu() {
        this.sendAction();
      },
      sendAction() {
        this.handler = setInterval(() => {
          const index = getRandom(0, 10);
          const str = danmuList[index];
          const dom = `<span>${str}</span>`;
          this.screen.push(dom);
        }, 1000);
      },
    };
    danmuTest.init();
  </script>
</html>
